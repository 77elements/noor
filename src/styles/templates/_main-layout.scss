/**
 * Main Layout Template
 * CSS Grid-based 3-column layout: Sidebar + Primary + Secondary
 */

@use 'sass:color';
@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

.main-layout {
  display: grid;
  grid-template-columns: $sidebar-width 1fr 1fr;
  grid-template-areas: "sidebar primary secondary";
  gap: $gap;
  padding: $gap;
  height: 100vh;
  box-sizing: border-box;
  overflow: hidden;

  // Responsive breakpoints
  @include desktop-down {
    grid-template-columns: 100px 1fr 1fr;
    gap: $gap;
    padding: $gap;
  }

  @include tablet-down {
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr 1fr;
    grid-template-areas:
      "sidebar"
      "primary"
      "secondary";
    gap: calc($gap / 2);
    padding: calc($gap / 2);
  }

  @include mobile-down {
    padding: calc($gap / 4);
    gap: calc($gap / 4);
  }
}

// Layout areas
.sidebar {
  grid-area: sidebar;
  min-width: 0;
  overflow: hidden; // Sidebar stays fixed, no scroll
}

.primary-content {
  grid-area: primary;
  min-width: 0;
  overflow-y: auto; // Independent vertical scroll
  overflow-x: hidden;
  height: 100%;

  .content-wrapper {
    height: 100%;
    // Normal flow - no flexbox/grid
  }

  // Custom scrollbar styling
  &::-webkit-scrollbar {
    width: 8px;
  }

  &::-webkit-scrollbar-track {
    background: $color-1; // Deep purple background
  }

  &::-webkit-scrollbar-thumb {
    background: $color-2; // Medium purple bar
    border-radius: 4px;
  }

  &::-webkit-scrollbar-thumb:hover {
    background: color.adjust($color-2, $lightness: 10%);
  }

  // Firefox
  scrollbar-width: thin;
  scrollbar-color: $color-2 $color-1;
}

.secondary-content {
  grid-area: secondary;
  min-width: 0;
  overflow-y: auto; // Independent vertical scroll for manual override
  overflow-x: hidden;
  height: 100%;

  .content-wrapper {
    height: 100%;
    // Normal flow - no flexbox/grid
  }

  .secondary-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: $gap 0;
    border-bottom: 1px solid $color-2;

    .secondary-title h2 {
      margin: 0;
      font-size: 1.25rem;
      color: $color-5;
    }

    .secondary-user {
      flex-shrink: 0;
    }
  }

  .secondary-content-body {
    height: calc(100% - 60px); // Full height minus header
    overflow: hidden;
  }

  // Custom scrollbar styling
  &::-webkit-scrollbar {
    width: 8px;
  }

  &::-webkit-scrollbar-track {
    background: $color-1; // Deep purple background
  }

  &::-webkit-scrollbar-thumb {
    background: $color-2; // Medium purple bar
    border-radius: 4px;
  }

  &::-webkit-scrollbar-thumb:hover {
    background: color.adjust($color-2, $lightness: 10%);
  }

  // Firefox
  scrollbar-width: thin;
  scrollbar-color: $color-2 $color-1;
}